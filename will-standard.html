<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Standard Will Generator | UK Will Wizard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìú</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="logo-icon">üìú</span>
                <div>
                    <h1>Standard Will Generator</h1>
                    <p class="arabic">UK Last Will &amp; Testament</p>
                </div>
            </div>
            <nav class="header-nav">
                <a href="home.html" class="nav-link">Home</a>
                <a href="index.html" class="nav-link" id="nav-islamic-will">Islamic Will</a>
                <a href="lpa.html" class="nav-link" id="nav-islamic-lpa">Islamic LPA</a>
                <a href="will-standard.html" class="nav-link nav-link-active" id="nav-standard-will">Standard Will</a>
                <a href="lpa-standard.html" class="nav-link" id="nav-standard-lpa">Standard LPA</a>
            </nav>
        </div>
    </header>

    <!-- Action Toolbar -->
    <div class="toolbar">
        <div class="container">
            <div class="toolbar-left">
                <span class="toolbar-title" id="currentClientName">New Will</span>
                <span class="toolbar-status" id="currentStatus">Draft</span>
            </div>
            <div class="toolbar-right">
                <button class="toolbar-btn" onclick="resetForm()" title="Start New">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                    <span>New</span>
                </button>
                <button class="toolbar-btn" onclick="loadSavedWills()" title="Open Saved Wills">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                    <span>Open</span>
                </button>
                <button class="toolbar-btn" onclick="saveProgress()" title="Save Progress">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                    <span>Save</span>
                </button>
                <button class="toolbar-btn toolbar-btn-primary" onclick="saveAndStartNew()" title="Save & Start New Client">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
                    <span>Save &amp; Next Client</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-steps" id="progressSteps"></div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main">
        <div class="container">

            <!-- Step 1: Welcome -->
            <section class="step active" data-step="1">
                <div class="step-header">
                    <span class="step-icon">üìÑ</span>
                    <h2>Welcome to the Standard Will Generator</h2>
                    <p>Create your legally compliant UK Last Will and Testament</p>
                </div>

                <div class="info-box">
                    <h3>Why Make a Will?</h3>
                    <p>Without a valid Will, your estate will be distributed according to the UK intestacy rules, which may not reflect your wishes. A Will ensures your assets go to the people you choose, allows you to appoint guardians for minor children, and can help reduce the burden on your loved ones during a difficult time.</p>
                </div>

                <div class="form-group">
                    <label class="form-label required">Select Will Type</label>
                    <div class="radio-cards">
                        <label class="radio-card">
                            <input type="radio" name="willType" value="simple" checked>
                            <div class="radio-card-content">
                                <span class="radio-card-icon">üìÑ</span>
                                <h4>Simple Will</h4>
                                <p>For straightforward estates with immediate family. Quick and easy to complete.</p>
                            </div>
                        </label>
                        <label class="radio-card">
                            <input type="radio" name="willType" value="comprehensive">
                            <div class="radio-card-content">
                                <span class="radio-card-icon">üìö</span>
                                <h4>Comprehensive Will</h4>
                                <p>For complex estates with multiple assets, overseas property, business interests.</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="shahadaConfirm" required>
                        <span class="checkmark"></span>
                        <span>I confirm that I am over 18 years of age and of sound mind, and I wish to create this Will freely and voluntarily</span>
                    </label>
                </div>
            </section>

            <!-- Step 2: Personal Details -->
            <section class="step" data-step="2">
                <div class="step-header">
                    <span class="step-icon">üë§</span>
                    <h2>Personal Details</h2>
                    <p>Your information as it will appear on the Will</p>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label class="form-label required">Full Legal Name</label>
                        <input type="text" class="form-input" id="fullName" placeholder="Enter your full name as per official documents" required>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Also Known As (if applicable)</label>
                        <input type="text" class="form-input" id="alsoKnownAs" placeholder="Any other names you are known by">
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Gender</label>
                        <select class="form-input" id="testatorGender" required>
                            <option value="">Select...</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label required">Date of Birth</label>
                        <input type="date" class="form-input" id="dateOfBirth" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Place of Birth</label>
                        <input type="text" class="form-input" id="placeOfBirth" placeholder="City, Country">
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label required">Current Address</label>
                        <textarea class="form-input" id="address" rows="3" placeholder="Full address including postcode" required></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">National Insurance Number</label>
                        <input type="text" class="form-input" id="niNumber" placeholder="AB 12 34 56 C">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Passport Number</label>
                        <input type="text" class="form-input" id="passportNumber" placeholder="Enter passport number">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Country of Origin</label>
                        <input type="text" class="form-input" id="countryOfOrigin" placeholder="Your country of origin">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" class="form-input" id="phone" placeholder="+44 7123 456789">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" class="form-input" id="email" placeholder="your@email.com">
                    </div>
                </div>
            </section>

            <!-- Step 3: Executors -->
            <section class="step" data-step="3">
                <div class="step-header">
                    <span class="step-icon">&#9878;</span>
                    <h2>Appointment of Executors</h2>
                    <p>Executors will manage your estate after your death</p>
                </div>

                <div class="info-box info-tip">
                    <strong>Tip:</strong> Choose responsible and trustworthy people who you trust to manage your estate. Appoint at least two executors in case one cannot act.
                </div>

                <h3 class="section-title">Primary Executor</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label required">Full Name</label>
                        <input type="text" class="form-input" id="executor1Name" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label required">Relationship</label>
                        <select class="form-input" id="executor1Relationship" required>
                            <option value="">Select...</option>
                            <option value="Spouse">Spouse</option>
                            <option value="Son">Son</option>
                            <option value="Daughter">Daughter</option>
                            <option value="Brother">Brother</option>
                            <option value="Sister">Sister</option>
                            <option value="Friend">Friend</option>
                            <option value="Solicitor">Solicitor</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label required">Address</label>
                        <textarea class="form-input" id="executor1Address" rows="2" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="executor1Phone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="executor1Email">
                    </div>
                </div>

                <h3 class="section-title">Secondary Executor (Reserve)</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="executor2Name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Relationship</label>
                        <select class="form-input" id="executor2Relationship">
                            <option value="">Select...</option>
                            <option value="Spouse">Spouse</option>
                            <option value="Son">Son</option>
                            <option value="Daughter">Daughter</option>
                            <option value="Brother">Brother</option>
                            <option value="Sister">Sister</option>
                            <option value="Friend">Friend</option>
                            <option value="Solicitor">Solicitor</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label class="form-label">Address</label>
                        <textarea class="form-input" id="executor2Address" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-input" id="executor2Phone">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="executor2Email">
                    </div>
                </div>
            </section>

            <!-- Step 4: Funeral Wishes -->
            <section class="step" data-step="4">
                <div class="step-header">
                    <span class="step-icon">&#9961;</span>
                    <h2>Funeral &amp; Burial Wishes</h2>
                    <p>Your preferences for funeral arrangements</p>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label class="form-label required">Funeral Type</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="funeralType" value="burial" checked>
                                <span>Burial</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="funeralType" value="cremation">
                                <span>Cremation</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="funeralType" value="no-preference">
                                <span>No Preference</span>
                            </label>
                        </div>
                    </div>

                    <!-- Burial Options -->
                    <div class="form-group full-width" id="burialOptionsGroup">
                        <label class="form-label">Preferred Cemetery (if known)</label>
                        <input type="text" class="form-input" id="preferredCemetery" placeholder="Name and location of cemetery">
                    </div>

                    <!-- Cremation Options -->
                    <div id="cremationOptionsGroup" style="display:none;" class="full-width">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">Preferred Crematorium</label>
                                <input type="text" class="form-input" id="preferredCrematorium" placeholder="Name and location of crematorium">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">What should be done with ashes?</label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="ashesPreference" value="scatter">
                                        <span>Scatter at a chosen location</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="ashesPreference" value="keep">
                                        <span>Keep with family</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="ashesPreference" value="interment">
                                        <span>Interment (bury ashes)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Funeral Style</label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="funeralStyle" value="religious">
                                <span>Religious service</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="funeralStyle" value="humanist">
                                <span>Non-religious (Humanist)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="funeralStyle" value="celebration">
                                <span>Celebration of life</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="funeralStyle" value="no-preference">
                                <span>No preference</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Special Funeral Instructions</label>
                        <textarea class="form-input" id="funeralInstructions" rows="3" placeholder="Any specific wishes for your funeral (music, readings, flowers, dress code, etc.)..."></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label class="form-label">Approximate Funeral Budget</label>
                        <input type="number" class="form-input" id="funeralBudget" placeholder="&pound;">
                    </div>
                </div>
            </section>

            <!-- Step 5: Family Details -->
            <section class="step" data-step="5">
                <div class="step-header">
                    <span class="step-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                    <h2>Family Details</h2>
                    <p>Information about your family members</p>
                </div>

                <div class="info-box">
                    <p>Family information helps ensure your estate is distributed according to your wishes. Providing accurate details about your dependants is important for the validity of your Will.</p>
                </div>

                <!-- Marital Status -->
                <div class="form-group">
                    <label class="form-label required">Marital Status</label>
                    <select class="form-input" id="maritalStatus" required>
                        <option value="">Select...</option>
                        <option value="single">Single (Never Married)</option>
                        <option value="married">Married</option>
                        <option value="divorced">Divorced</option>
                        <option value="widowed">Widowed</option>
                    </select>
                </div>

                <!-- Spouse Section -->
                <div id="spouseSection" style="display:none;">
                    <h3 class="section-title">Spouse Details</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required">Spouse's Full Name</label>
                            <input type="text" class="form-input" id="spouseName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Marriage Date</label>
                            <input type="date" class="form-input" id="marriageDate">
                        </div>
                    </div>
                </div>

                <!-- Children Section -->
                <h3 class="section-title">Children</h3>
                <div class="form-group">
                    <label class="form-label required">Do you have children?</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="hasChildren" value="yes">
                            <span>Yes</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="hasChildren" value="no" checked>
                            <span>No</span>
                        </label>
                    </div>
                </div>

                <div id="childrenSection" style="display:none;">
                    <div id="childrenList"></div>
                    <button type="button" class="btn btn-add" onclick="addChild()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"></circle><path d="M20 21a8 8 0 1 0-16 0"></path><line x1="20" y1="8" x2="20" y2="14"></line><line x1="17" y1="11" x2="23" y2="11"></line></svg>
                        Add Child
                    </button>
                </div>

                <!-- Parents Section -->
                <h3 class="section-title">Parents</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Father</label>
                        <select class="form-input" id="fatherStatus">
                            <option value="deceased">Deceased</option>
                            <option value="living">Living</option>
                        </select>
                    </div>
                    <div class="form-group" id="fatherNameGroup" style="display:none;">
                        <label class="form-label">Father's Name</label>
                        <input type="text" class="form-input" id="fatherName">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Mother</label>
                        <select class="form-input" id="motherStatus">
                            <option value="deceased">Deceased</option>
                            <option value="living">Living</option>
                        </select>
                    </div>
                    <div class="form-group" id="motherNameGroup" style="display:none;">
                        <label class="form-label">Mother's Name</label>
                        <input type="text" class="form-input" id="motherName">
                    </div>
                </div>
            </section>

            <!-- Step 6: Debts & Financial Obligations -->
            <section class="step" data-step="6">
                <div class="step-header">
                    <span class="step-icon">üí∞</span>
                    <h2>Debts &amp; Financial Obligations</h2>
                    <p>All debts must be paid from your estate before distribution to beneficiaries</p>
                </div>

                <div class="info-box">
                    <p>Under UK law, your debts are settled from your estate before any gifts or distributions take effect. It is important to provide a complete picture of your financial obligations.</p>
                </div>

                <!-- Debts You Owe -->
                <h3 class="section-title">Debts You Owe</h3>
                <div id="debtsList"></div>
                <button type="button" class="btn btn-add" onclick="addDebt()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Debt
                </button>

                <!-- Debts Owed TO You -->
                <h3 class="section-title">Debts Owed TO You</h3>
                <div id="debtsOwedList"></div>
                <button type="button" class="btn btn-add" onclick="addDebtOwed()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Debt Owed to Me
                </button>

                <div class="form-group" style="margin-top: 1rem;">
                    <label class="form-label">Debts You Wish to Forgive</label>
                    <textarea class="form-input" id="forgivenDebts" rows="2" placeholder="List any debts you wish to forgive..."></textarea>
                </div>
            </section>

            <!-- Step 7: Assets -->
            <section class="step" data-step="7">
                <div class="step-header">
                    <span class="step-icon">üè†</span>
                    <h2>Your Assets</h2>
                    <p>List all your assets for estate calculation</p>
                </div>

                <!-- Properties -->
                <h3 class="section-title">Properties</h3>
                <div id="propertiesList"></div>
                <button type="button" class="btn btn-add" onclick="addProperty()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    Add Property
                </button>

                <div class="info-box info-warning" style="margin-top: 1rem;">
                    <strong>Joint Tenancy Note:</strong> Property held as joint tenants passes automatically to the survivor outside this Will. To include in your Will, consider changing to tenants in common.
                </div>

                <!-- Bank Accounts -->
                <h3 class="section-title">Bank Accounts</h3>
                <div id="bankAccountsList"></div>
                <button type="button" class="btn btn-add" onclick="addBankAccount()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Bank Account
                </button>

                <!-- Investments -->
                <h3 class="section-title">Investments</h3>
                <div id="investmentsList"></div>
                <button type="button" class="btn btn-add" onclick="addInvestment()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Investment
                </button>

                <!-- Business Interests -->
                <h3 class="section-title">Business Interests</h3>
                <div id="businessList"></div>
                <button type="button" class="btn btn-add" onclick="addBusiness()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Business
                </button>

                <!-- Vehicles -->
                <h3 class="section-title">Vehicles</h3>
                <div id="vehiclesList"></div>
                <button type="button" class="btn btn-add" onclick="addVehicle()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Vehicle
                </button>

                <!-- Valuables -->
                <h3 class="section-title">Valuables &amp; Personal Items</h3>
                <div id="valuablesList"></div>
                <button type="button" class="btn btn-add" onclick="addValuable()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Valuable Item
                </button>

                <!-- Digital Assets -->
                <h3 class="section-title">Digital Assets</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="hasCrypto">
                            <span class="checkmark"></span>
                            <span>I have cryptocurrency</span>
                        </label>
                    </div>
                </div>
                <div id="cryptoSection" style="display:none;">
                    <div class="form-group">
                        <label class="form-label">Cryptocurrency Details</label>
                        <textarea class="form-input" id="cryptoDetails" rows="2" placeholder="Type (Bitcoin, etc.), approximate value, wallet information location..."></textarea>
                    </div>
                </div>
            </section>

            <!-- Step 8: Beneficiaries & Estate Distribution -->
            <section class="step" data-step="8">
                <div class="step-header">
                    <span class="step-icon">üéÅ</span>
                    <h2>Beneficiaries &amp; Estate Distribution</h2>
                    <p>Specify how your estate should be distributed</p>
                </div>

                <div class="info-box">
                    <h4>Testamentary Freedom</h4>
                    <p>Under UK law, you have testamentary freedom to distribute your estate as you wish. However, dependants may have a claim under the <strong>Inheritance (Provision for Family and Dependants) Act 1975</strong>. It is advisable to make reasonable provision for your spouse, children, and anyone financially dependent on you.</p>
                </div>

                <!-- Specific Gifts -->
                <h3 class="section-title">Specific Gifts</h3>
                <p class="form-hint" style="margin-bottom: 1rem;">Leave specific items or sums of money to named individuals.</p>
                <div id="specificGiftsList"></div>
                <button type="button" class="btn btn-add" onclick="addSpecificGift()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Specific Gift
                </button>

                <!-- Charitable Bequests -->
                <h3 class="section-title">Charitable Bequests</h3>
                <p class="form-hint" style="margin-bottom: 1rem;">Leave gifts to registered charities. Charitable bequests can reduce Inheritance Tax liability.</p>
                <div id="charitableList"></div>
                <button type="button" class="btn btn-add" onclick="addCharity()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Charity
                </button>

                <!-- Residuary Estate -->
                <h3 class="section-title">Residuary Estate</h3>
                <p class="form-hint" style="margin-bottom: 1rem;">After debts, expenses, and specific gifts are paid, how should the remainder of your estate be distributed? Percentages should total 100%.</p>

                <div id="residuaryBeneficiariesList"></div>
                <button type="button" class="btn btn-add" onclick="addBeneficiary()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Beneficiary
                </button>

                <div id="residuaryTotalContainer" style="margin-top: 1rem; padding: 1rem; border-radius: 8px; background: var(--bg-secondary, #f8fafc);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <strong>Total Residuary Allocation:</strong>
                        <span id="residuaryTotalPercentage" style="font-size: 1.25rem; font-weight: 700;">0%</span>
                    </div>
                    <div id="residuaryWarning" class="info-box info-warning" style="margin-top: 0.75rem; display: none;">
                        <strong>Warning:</strong> The total percentage does not equal 100%. Please adjust your beneficiary allocations.
                    </div>
                </div>
            </section>

            <!-- Step 9: Guardianship -->
            <section class="step" data-step="9">
                <div class="step-header">
                    <span class="step-icon">üë∂</span>
                    <h2>Guardianship of Minor Children</h2>
                    <p>Who will care for your children if you pass away?</p>
                </div>

                <div class="form-group">
                    <label class="form-label required">Do you have children under 18?</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="hasMinorChildren" value="yes">
                            <span>Yes</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="hasMinorChildren" value="no" checked>
                            <span>No</span>
                        </label>
                    </div>
                </div>

                <div id="guardianshipSection" style="display:none;">
                    <h3 class="section-title">Primary Guardian</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label required">Full Name</label>
                            <input type="text" class="form-input" id="guardian1Name">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">Relationship</label>
                            <input type="text" class="form-input" id="guardian1Relationship" placeholder="e.g., Brother, Sister, Uncle, Friend">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label required">Address</label>
                            <textarea class="form-input" id="guardian1Address" rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Phone</label>
                            <input type="tel" class="form-input" id="guardian1Phone">
                        </div>
                    </div>

                    <h3 class="section-title">Secondary Guardian (Reserve)</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-input" id="guardian2Name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Relationship</label>
                            <input type="text" class="form-input" id="guardian2Relationship">
                        </div>
                        <div class="form-group full-width">
                            <label class="form-label">Address</label>
                            <textarea class="form-input" id="guardian2Address" rows="2"></textarea>
                        </div>
                    </div>

                    <h3 class="section-title">Wishes for Children's Upbringing</h3>
                    <div class="form-group">
                        <label class="form-label">Upbringing Wishes</label>
                        <textarea class="form-input" id="upbringingWishes" rows="4" placeholder="Describe any wishes for how your children should be raised, including education preferences, values, hobbies, or any other guidance for the guardian..."></textarea>
                    </div>
                </div>

                <!-- Additional Special Circumstances -->
                <h3 class="section-title">Additional Special Circumstances</h3>

                <!-- Organ Donation -->
                <div class="form-group">
                    <label class="form-label">Organ Donation Preference</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="organDonation" value="consent">
                            <span>Yes, I consent to organ donation</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="organDonation" value="refuse">
                            <span>No, I do not consent to organ donation</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="organDonation" value="defer" checked>
                            <span>I defer to my family to decide at the time</span>
                        </label>
                    </div>
                </div>

                <!-- Additional Wishes -->
                <div class="form-group">
                    <label class="form-label">Additional Wishes or Instructions</label>
                    <textarea class="form-input" id="additionalWishes" rows="4" placeholder="Any other instructions, wishes, or messages you would like to include in your Will..."></textarea>
                </div>
            </section>

            <!-- Step 10: Review & Generate -->
            <section class="step" data-step="10">
                <div class="step-header">
                    <span class="step-icon">üìã</span>
                    <h2>Review &amp; Generate Your Will</h2>
                    <p>Please review all details before generating your Will</p>
                </div>

                <div id="reviewContent"></div>

                <div class="action-buttons" style="margin-top: 2rem; margin-bottom: 2rem;">
                    <button class="btn btn-primary" onclick="generateWill()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line></svg>
                        Generate Will Document
                    </button>
                    <button class="btn btn-secondary" onclick="printWill()" style="display:none;" id="printWillBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
                        Print Will
                    </button>
                    <button class="btn btn-secondary" onclick="downloadPDF()" style="display:none;" id="downloadPDFBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        Download PDF
                    </button>
                </div>

                <div id="willDocument" class="will-document"></div>
            </section>

        </div>
    </main>

    <!-- Navigation Buttons -->
    <div class="navigation">
        <div class="container nav-buttons">
            <button class="btn btn-nav btn-nav-prev" id="prevBtn" onclick="changeStep(-1)" style="display: none;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                Previous
            </button>
            <button class="btn btn-nav btn-nav-next" id="nextBtn" onclick="changeStep(1)">
                Next Step
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </button>
        </div>
    </div>

    <!-- Load Options Modal -->
    <div id="loadOptionsModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>üìÑ Open Will</h3>
                <button class="modal-close" onclick="closeLoadOptionsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem;"><strong id="loadWillName">Client Name</strong></p>
                <p style="color: #64748b; margin-bottom: 1.5rem;">What would you like to do with this will?</p>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <button class="btn btn-primary" onclick="loadWillAndView()" style="width: 100%; justify-content: center;">
                        <span class="icon">üìÑ</span> View / Download Will Document
                    </button>
                    <button class="btn btn-secondary" onclick="loadWillAndEdit()" style="width: 100%; justify-content: center;">
                        <span class="icon">&#9999;&#65039;</span> Edit Will Details
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLoadOptionsModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Saved Wills Modal -->
    <div id="savedWillsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÇ Saved Wills</h3>
                <button class="modal-close" onclick="closeSavedWillsModal()">&times;</button>
            </div>
            <div class="modal-body" id="savedWillsList">
                <p>Loading...</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSavedWillsModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px; text-align: center;">
            <div class="modal-header" style="justify-content: center; border-bottom: none;">
                <h3 style="margin: 0;">&#10004;&#65039; Will Generated Successfully</h3>
            </div>
            <div class="modal-body">
                <p style="color: #64748b; margin-bottom: 1.5rem;">Your Standard Will document has been generated. You can now view, print, or download it.</p>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <button class="btn btn-primary" onclick="closeSuccessModal(); scrollToWillDocument();" style="width: 100%; justify-content: center;">
                        üìÑ View Document
                    </button>
                    <button class="btn btn-secondary" onclick="closeSuccessModal(); goToStep(1);" style="width: 100%; justify-content: center;">
                        &#9999;&#65039; Edit Will
                    </button>
                    <button class="btn btn-secondary" onclick="closeSuccessModal();" style="width: 100%; justify-content: center;">
                        Got It
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>This tool generates a template Last Will and Testament. Please have it reviewed by a qualified solicitor before signing.</p>
            <p>&copy; 2024 Will Generator. For guidance purposes only. Not a substitute for professional legal advice.</p>
        </div>
    </footer>

    <script src="config.js"></script>
    <script src="will-standard-script.js"></script>
</body>
</html>
